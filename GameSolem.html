<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="es"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Med-Tech Quest Integrado&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body <span class="Apple-converted-space">      </span>{</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Caso 3: Hemofilia A en niño con hemarthrosis',</p>
<p class="p1"><span class="Apple-converted-space">        </span>text: 'Niño de 12 años presenta hematomas frecuentes y dolor articular tras golpes leves. Laboratorio: TTPa prolongado, TP normal, plaquetas normales, factor VIII disminuido.',</p>
<p class="p1"><span class="Apple-converted-space">        </span>questions: { A: '¿Qué fase está comprometida?', B: '¿Defecto molecular?', C: 'Tratamiento agudo?' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>options: { A: ['Primaria','Secundaria','Fibrinólisis'], B: ['vWF','VIII','Plasmina'], C: ['DDAVP','VitK','Plaquetas'] },</p>
<p class="p1"><span class="Apple-converted-space">        </span>correct: { A: '2', B: '2', C: '1' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>feedback: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>A: { '1':'No. Tapón plaquetario normal.','2':'Sí. Falla fase secundaria.','3':'No. Fibrinólisis posterior.' },</p>
<p class="p1"><span class="Apple-converted-space">          </span>B: { '1':'No. vWF normal.','2':'Sí. Factor VIII bajo.','3':'No. Sin hiperfibrinólisis.' },</p>
<p class="p1"><span class="Apple-converted-space">          </span>C: { '1':'Sí. DDAVP libera VIII.','2':'No. VitK ineficaz.','3':'No. Plaquetas normales.' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>},</p>
<p class="p1"><span class="Apple-converted-space">      </span>{</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Caso 4: Eficacia de AINE vs paracetamol',</p>
<p class="p1"><span class="Apple-converted-space">        </span>text: 'Mujer de 32 años con dolor muscular e infección viral. Paracetamol c/6h sin alivio. Se cambia a AINE no selectivo.',</p>
<p class="p1"><span class="Apple-converted-space">        </span>questions: { A: '¿Mecanismo antipirético del paracetamol?', B: '¿Por qué no alivia el dolor muscular?', C: '¿Ventaja del AINE?' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>options: { A: ['COX central','Opioides','Neuronal'], B: ['No inhibe COX periférica','No entra SNC','No bloquea bradiquinina','No vasoconstriñe'], C: ['COX1/2 periférica','Vida media','Endorfinas','H1'] },</p>
<p class="p1"><span class="Apple-converted-space">        </span>correct: { A: '1', B: '1', C: '1' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>feedback: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>A: { '1':'Correcto. Inhibe COX en SNC.','2':'Incorrecto. No es opioide.','3':'Incorrecto. Reduce prostaglandinas.' },</p>
<p class="p1"><span class="Apple-converted-space">          </span>B: { '1':'Correcto. Sin efecto antiinflamatorio periférico.','2':'Incorrecto. Actúa en SNC.','3':'Incorrecto. Bradiquinina no clave.','4':'Incorrecto. No antihistamínico.' },</p>
<p class="p1"><span class="Apple-converted-space">          </span>C: { '1':'Correcto. Disminuye prostaglandinas periféricas.','2':'Incorrecto. No afecta paracetamol.','3':'Incorrecto. No libera endorfinas.','4':'Incorrecto. No bloquea H1.' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>},</p>
<p class="p1"><span class="Apple-converted-space">      </span>{</p>
<p class="p1"><span class="Apple-converted-space">        </span>title: 'Caso 5: Tejido de granulación tras quemadura',</p>
<p class="p1"><span class="Apple-converted-space">        </span>text: 'Paciente con quemadura de segundo grado en brazo muestra tejido de granulación durante la fase proliferativa.',</p>
<p class="p1"><span class="Apple-converted-space">        </span>questions: { A: '¿Qué célula produce la matriz extracelular?', B: '¿Función de esta célula?', C: '¿Qué compone la matriz?' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>options: { A: ['Neutrófilos','Endoteliales','Fibroblastos','Macrófagos'], B: ['Inflaman','Forman vasos','Sintetizan colágeno','Fagocitan'], C: ['Procolágeno','Factores de crecimiento','Oxígeno'] },</p>
<p class="p1"><span class="Apple-converted-space">        </span>correct: { A: '3', B: '3', C: '1' },</p>
<p class="p1"><span class="Apple-converted-space">        </span>feedback: {</p>
<p class="p1"><span class="Apple-converted-space">          </span>A: { '1':'Incorrecto. Neutrófilos limpian, no sintetizan matriz.','2':'Incorrecto. Endoteliales forman capilares.','3':'Correcto. Fibroblastos sintetizan colágeno y proteínas.','4':'Incorrecto. Macrófagos limpian detritos.' },</p>
<p class="p1"><span class="Apple-converted-space">          </span>B: { '1':'No. Infiltran y eliminan patógenos.','2':'No. Endoteliales forman vasos.','3':'Sí. Producen colágeno para sostén.','4':'No. Fagocitan restos.' },</p>
<p class="p1"><span class="Apple-converted-space">          </span>C: { '1':'Correcto. Procolágeno se convierte en colágeno.','2':'No. Son señales, no matriz principal.','3':'No. Matriz no es gas.' }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>let currentCase = 0;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let stage = 'A';</p>
<p class="p1"><span class="Apple-converted-space">    </span>let tokens = 5;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const trackCells = cases.length;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const titleEl = document.getElementById('case-title');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const textEl = document.getElementById('case-text');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const qAText = document.getElementById('qA-text');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const qBText = document.getElementById('qB-text');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const qCText = document.getElementById('qC-text');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const optionsEl = document.getElementById('options');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const feedbackEl = document.getElementById('feedback');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const tokensEl = document.getElementById('tokens');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const nextBtn = document.getElementById('next-case');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const prevBtn = document.getElementById('prev-question');</p>
<p class="p1"><span class="Apple-converted-space">    </span>const cellsContainer = document.getElementById('cells');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>// Inicializar track</p>
<p class="p1"><span class="Apple-converted-space">    </span>for (let i = 1; i &lt;= trackCells; i++) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const span = document.createElement('span'); span.className = 'cell'; span.id = 'cell' + i; cellsContainer.appendChild(span);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function loadCase(n) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const c = cases[n];</p>
<p class="p1"><span class="Apple-converted-space">      </span>titleEl.textContent = c.title;</p>
<p class="p1"><span class="Apple-converted-space">      </span>textEl.textContent = c.text;</p>
<p class="p1"><span class="Apple-converted-space">      </span>qAText.textContent = c.questions.A;</p>
<p class="p1"><span class="Apple-converted-space">      </span>qBText.textContent = c.questions.B;</p>
<p class="p1"><span class="Apple-converted-space">      </span>qCText.textContent = c.questions.C;</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById('questionA').classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById('questionB').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById('questionC').classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>feedbackEl.textContent = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>stage = 'A';</p>
<p class="p1"><span class="Apple-converted-space">      </span>prevBtn.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>nextBtn.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>renderOptions();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function renderOptions() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>optionsEl.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>const c = cases[currentCase];</p>
<p class="p1"><span class="Apple-converted-space">      </span>c.options[stage].forEach((text, i) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const btn = document.createElement('button'); btn.className = 'btn';</p>
<p class="p1"><span class="Apple-converted-space">        </span>const val = (i + 1).toString(); btn.textContent = text;</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.dataset.q = stage; btn.dataset.value = val;</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.addEventListener('click', onOptionClick);</p>
<p class="p1"><span class="Apple-converted-space">        </span>optionsEl.appendChild(btn);</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function showStage(s) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>['A','B','C'].forEach(x =&gt; document.getElementById('question' + x).classList.toggle('hidden', x !== s));</p>
<p class="p1"><span class="Apple-converted-space">      </span>stage = s;</p>
<p class="p1"><span class="Apple-converted-space">      </span>feedbackEl.textContent = '';</p>
<p class="p1"><span class="Apple-converted-space">      </span>renderOptions();</p>
<p class="p1"><span class="Apple-converted-space">      </span>prevBtn.classList.toggle('hidden', stage === 'A');</p>
<p class="p1"><span class="Apple-converted-space">      </span>nextBtn.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function onOptionClick(e) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const q = e.target.dataset.q, val = e.target.dataset.value;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const c = cases[currentCase];</p>
<p class="p1"><span class="Apple-converted-space">      </span>feedbackEl.textContent = c.feedback[q][val];</p>
<p class="p1"><span class="Apple-converted-space">      </span>tokens += (val === c.correct[q]) ? 1 : -1;</p>
<p class="p1"><span class="Apple-converted-space">      </span>tokensEl.textContent = tokens;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (q === 'C' &amp;&amp; val === c.correct[q]) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const cell = document.getElementById('cell' + (currentCase + 1)); if (cell) cell.classList.add('filled');</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>prevBtn.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (q === 'C') nextBtn.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>Array.from(optionsEl.children).forEach(b =&gt; b.disabled = true);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>prevBtn.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (stage === 'B') showStage('A'); else if (stage === 'C') showStage('B');</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>nextBtn.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">      </span>currentCase++;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (currentCase &lt; cases.length) loadCase(currentCase);</p>
<p class="p1"><span class="Apple-converted-space">      </span>else alert('¡Juego completado! Fichas finales: ' + tokens);</p>
<p class="p1"><span class="Apple-converted-space">    </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>loadCase(0);</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
